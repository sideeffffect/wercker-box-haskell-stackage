name: haskell-stackage
version: 3.0.0
inherits: ondrapelech/haskell@2.0.3
description: wercker box for the GHC 7.8 and the latest LTS Stackage snapshot, with Haskell Platform packages preinstalled
type: main
platform: ubuntu@12.04
keywords:
  - haskell
  - stackage
  - ubuntu
  - 14.10
packages:
script: |
  # variables
  HASKELL_PLATFORM_PACKAGES="array async attoparsec base bytestring case-insensitive containers deepseq directory extensible-exceptions fgl filepath GLURaw GLUT hashable haskell2010 haskell98 hpc hscolour html HTTP HUnit mtl network old-locale old-time OpenGL OpenGLRaw parallel parsec pretty primitive process QuickCheck random regex-base regex-compat regex-posix split stm syb template-haskell text time transformers unix unordered-containers vector xhtml zlib"
  STACKAGE="https://www.stackage.org"
  STACKAGE_BRANCH="lts"
  

box-detect:
  priority: 1000
  version :
  detect:
    - files:
      - '*.cabal'

default-build:
  haskell:
    priority: 50
    detect:
      - default: true
    text-to-append: |
      # Build definition
      build:
        # The steps that will be executed on build
        steps:
          - script:
              name: install dependencies
              code: |
                cabal update
                cabal install --enable-tests --only-dependencies
          - script:
              name: build package
              code: |
                cabal configure --enable-tests
                cabal build
          - script:
              name: test package
              code: |
                cabal test --show-details=always

